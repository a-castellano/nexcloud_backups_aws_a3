##!/bin/sh
# file: tests/01-variables

testVerboseNotEnabled() {
    undefined_verbose=$(./nexcloud_backups_aws_s3 --test='verbose')
    assertEquals "$undefined_verbose" "VERBOSE is not defined"
}

testVerboseIsEnabled() {
    defined_verbose=$(./nexcloud_backups_aws_s3 --test='verbose' -v)
    assertEquals "$defined_verbose" "VERBOSE -> true"
}

testUsage() {
    usage_call=$(./nexcloud_backups_aws_s3 -u)
    startSkipping
    assertEquals "$usage_call" "VERBOSE -> true"
}

testUndefinedValue() {
    undefined_variable=$(./nexcloud_backups_aws_s3 --test='undefined-variable')
    assertEquals "$undefined_variable" "UNDEFINED_VARIABLE is not defined"
}

testDefaultNextcloudPath() {
    nextcloud_path=$(./nexcloud_backups_aws_s3 --test='nextcloud-path')
    assertEquals "$nextcloud_path" "NEXTCLOUD_PATH -> /var/www/nextcloud"
}

testChangueNextcloudPath() {
    nextcloud_path=$(./nexcloud_backups_aws_s3 --nextcloud-path='/home/user/test' --test='nextcloud-path')
    assertEquals "$nextcloud_path" "NEXTCLOUD_PATH -> /home/user/test"
}

# Load shUnit2.
. /usr/bin/shunit2
